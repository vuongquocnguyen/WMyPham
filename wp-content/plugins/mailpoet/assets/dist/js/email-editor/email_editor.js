!function(){var e={372:function(e,t){var i;!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var a=typeof i;if("string"===a||"number"===a)e.push(i);else if(Array.isArray(i)){if(i.length){var o=r.apply(null,i);o&&e.push(o)}}else if("object"===a){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){e.push(i.toString());continue}for(var s in i)n.call(i,s)&&i[s]&&e.push(s)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(i=function(){return r}.apply(t,[]))||(e.exports=i)}()},352:function(e){var t=function(e){return"string"==typeof e};e.exports=function(e,i,n){return Array.isArray(e)||(e=[e]),r=e.map((function(e){return t(e)?function(e,i,n){var r=0,a=0;if(""===e)return e;if(!e||!t(e))throw new TypeError("First argument to react-string-replace#replaceString must be a string");var o,s,l,c=i;(function(e){return e instanceof RegExp})(c)||(c=new RegExp("("+(o=c,s=/[\\^$.*+?()[\]{}|]/g,l=RegExp(s.source),(o&&l.test(o)?o.replace(s,"\\$&"):o)+")"),"gi"));for(var d=e.split(c),p=1,m=d.length;p<m;p+=2)a=d[p].length,r+=d[p-1].length,d[p]=n(d[p],p,r),r+=a;return d}(e,i,n):e})),a=[],r.forEach((function(e){Array.isArray(e)?a=a.concat(e):a.push(e)})),a;var r,a}},875:function(e,t,i){"use strict";var n=i(196),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,i){var n,a={},c=null,d=null;for(n in void 0!==i&&(c=""+i),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,n)&&!l.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:r,type:e,key:c,ref:d,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},250:function(e,t,i){"use strict";e.exports=i(875)},196:function(e){"use strict";e.exports=window.React}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,i),a.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};i.r(e),i.d(e,{closeModal:function(){return V},disableComplementaryArea:function(){return M},enableComplementaryArea:function(){return I},openModal:function(){return F},pinItem:function(){return A},setDefaultComplementaryArea:function(){return N},setFeatureDefaults:function(){return O},setFeatureValue:function(){return R},toggleFeature:function(){return B},unpinItem:function(){return L}});var t={};i.r(t),i.d(t,{getActiveComplementaryArea:function(){return D},isComplementaryAreaLoading:function(){return z},isFeatureActive:function(){return H},isItemPinned:function(){return G},isModalActive:function(){return U}});var n={};i.r(n),i.d(n,{changePreviewDeviceType:function(){return fe},closeSidebar:function(){return be},openSidebar:function(){return xe},requestSendingNewsletterPreview:function(){return ke},saveEditedEmail:function(){return Se},toggleFeature:function(){return _e},toggleInserterSidebar:function(){return ge},toggleListviewSidebar:function(){return ve},togglePreviewModal:function(){return we},toggleSettingsSidebarActiveTab:function(){return Ee},updateEmailMailPoetProperty:function(){return je},updateSendPreviewEmail:function(){return ye}});var r={};i.r(r),i.d(r,{getAutosaveInterval:function(){return We},getEmailPostId:function(){return Oe},getInitialEditorSettings:function(){return ze},getLayout:function(){return $e},getPaletteColors:function(){return Ge},getPreviewState:function(){return He},getSettingsSidebarActiveTab:function(){return De},getStyles:function(){return Ue},hasEdits:function(){return Ie},hasEmptyContent:function(){return Be},isEmailLoaded:function(){return Me},isEmailSent:function(){return Re},isEmpty:function(){return Le},isFeatureActive:function(){return Ce},isInserterSidebarOpened:function(){return Fe},isListviewSidebarOpened:function(){return Ve},isSaving:function(){return Ae},isSidebarOpened:function(){return Ne}}),window.wp.formatLibrary;var a=window.wp.data,o=window.wp.element,s=window.wp.components,l=window.wp.keyboardShortcuts,c=window.wp.coreData,d=window.wp.blockLibrary,p=window.wp.hooks;const m="email-editor/editor",u="email-editor/editor/main",h="email",_="block",g="email-editor/editor/styles";var v=window.wp.dataControls,f=i(372),w=i.n(f),y=window.wp.i18n,x=window.wp.primitives,b=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),E=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})),S=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"})),j=window.wp.viewport,k=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),P=window.wp.deprecated,T=i.n(P),C=window.wp.preferences;const N=(e,t)=>({type:"SET_DEFAULT_COMPLEMENTARY_AREA",scope:e,area:t}),I=(e,t)=>({registry:i,dispatch:n})=>{t&&(i.select(C.store).get(e,"isComplementaryAreaVisible")||i.dispatch(C.store).set(e,"isComplementaryAreaVisible",!0),n({type:"ENABLE_COMPLEMENTARY_AREA",scope:e,area:t}))},M=e=>({registry:t})=>{t.select(C.store).get(e,"isComplementaryAreaVisible")&&t.dispatch(C.store).set(e,"isComplementaryAreaVisible",!1)},A=(e,t)=>({registry:i})=>{if(!t)return;const n=i.select(C.store).get(e,"pinnedItems");!0!==n?.[t]&&i.dispatch(C.store).set(e,"pinnedItems",{...n,[t]:!0})},L=(e,t)=>({registry:i})=>{if(!t)return;const n=i.select(C.store).get(e,"pinnedItems");i.dispatch(C.store).set(e,"pinnedItems",{...n,[t]:!1})};function B(e,t){return function({registry:i}){T()("dispatch( 'core/interface' ).toggleFeature",{since:"6.0",alternative:"dispatch( 'core/preferences' ).toggle"}),i.dispatch(C.store).toggle(e,t)}}function R(e,t,i){return function({registry:n}){T()("dispatch( 'core/interface' ).setFeatureValue",{since:"6.0",alternative:"dispatch( 'core/preferences' ).set"}),n.dispatch(C.store).set(e,t,!!i)}}function O(e,t){return function({registry:i}){T()("dispatch( 'core/interface' ).setFeatureDefaults",{since:"6.0",alternative:"dispatch( 'core/preferences' ).setDefaults"}),i.dispatch(C.store).setDefaults(e,t)}}function F(e){return{type:"OPEN_MODAL",name:e}}function V(){return{type:"CLOSE_MODAL"}}const D=(0,a.createRegistrySelector)((e=>(t,i)=>{const n=e(C.store).get(i,"isComplementaryAreaVisible");if(void 0!==n)return!1===n?null:t?.complementaryAreas?.[i]})),z=(0,a.createRegistrySelector)((e=>(t,i)=>{const n=e(C.store).get(i,"isComplementaryAreaVisible"),r=t?.complementaryAreas?.[i];return n&&void 0===r})),G=(0,a.createRegistrySelector)((e=>(t,i,n)=>{var r;const a=e(C.store).get(i,"pinnedItems");return null===(r=a?.[n])||void 0===r||r})),H=(0,a.createRegistrySelector)((e=>(t,i,n)=>(T()("select( 'core/interface' ).isFeatureActive( scope, featureName )",{since:"6.0",alternative:"select( 'core/preferences' ).get( scope, featureName )"}),!!e(C.store).get(i,n))));function U(e,t){return e.activeModal===t}var $=(0,a.combineReducers)({complementaryAreas:function(e={},t){switch(t.type){case"SET_DEFAULT_COMPLEMENTARY_AREA":{const{scope:i,area:n}=t;return e[i]?e:{...e,[i]:n}}case"ENABLE_COMPLEMENTARY_AREA":{const{scope:i,area:n}=t;return{...e,[i]:n}}}return e},activeModal:function(e=null,t){switch(t.type){case"OPEN_MODAL":return t.name;case"CLOSE_MODAL":return null}return e}});const W=(0,a.createReduxStore)("core/interface",{reducer:$,actions:e,selectors:t});(0,a.register)(W);var Y=(0,window.wp.plugins.withPluginContext)(((e,t)=>({icon:t.icon||e.icon,identifier:t.identifier||`${e.name}/${t.name}`}))),Z=Y((function({as:e=s.Button,scope:t,identifier:i,icon:n,selectedIcon:r,name:l,...c}){const d=e,p=(0,a.useSelect)((e=>e(W).getActiveComplementaryArea(t)===i),[i,t]),{enableComplementaryArea:m,disableComplementaryArea:u}=(0,a.useDispatch)(W);return(0,o.createElement)(d,{icon:r&&p?r:n,"aria-controls":i.replace("/",":"),onClick:()=>{p?u(t):m(t,i)},...c})})),q=({smallScreenTitle:e,children:t,className:i,toggleButtonProps:n})=>{const r=(0,o.createElement)(Z,{icon:k,...n});return(0,o.createElement)(o.Fragment,null,(0,o.createElement)("div",{className:"components-panel__header interface-complementary-area-header__small"},e&&(0,o.createElement)("span",{className:"interface-complementary-area-header__small-title"},e),r),(0,o.createElement)("div",{className:w()("components-panel__header","interface-complementary-area-header",i),tabIndex:-1},t,r))};const J=()=>{};function K({name:e,as:t=s.Button,onClick:i,...n}){return(0,o.createElement)(s.Fill,{name:e},(({onClick:e})=>(0,o.createElement)(t,{onClick:i||e?(...t)=>{(i||J)(...t),(e||J)(...t)}:void 0,...n})))}K.Slot=function({name:e,as:t=s.ButtonGroup,fillProps:i={},bubblesVirtually:n,...r}){return(0,o.createElement)(s.Slot,{name:e,bubblesVirtually:n,fillProps:i},(e=>{if(!o.Children.toArray(e).length)return null;const i=[];o.Children.forEach(e,(({props:{__unstableExplicitMenuItem:e,__unstableTarget:t}})=>{t&&e&&i.push(t)}));const n=o.Children.map(e,(e=>!e.props.__unstableExplicitMenuItem&&i.includes(e.props.__unstableTarget)?null:e));return(0,o.createElement)(t,{...r},n)}))};var Q=K;const X=({__unstableExplicitMenuItem:e,__unstableTarget:t,...i})=>(0,o.createElement)(s.MenuItem,{...i});function ee({scope:e,target:t,__unstableExplicitMenuItem:i,...n}){return(0,o.createElement)(Z,{as:n=>(0,o.createElement)(Q,{__unstableExplicitMenuItem:i,__unstableTarget:`${e}/${t}`,as:X,name:`${e}/plugin-more-menu`,...n}),role:"menuitemcheckbox",selectedIcon:b,name:t,scope:e,...n})}function te({scope:e,...t}){return(0,o.createElement)(s.Fill,{name:`PinnedItems/${e}`,...t})}te.Slot=function({scope:e,className:t,...i}){return(0,o.createElement)(s.Slot,{name:`PinnedItems/${e}`,...i},(e=>e?.length>0&&(0,o.createElement)("div",{className:w()(t,"interface-pinned-items")},e)))};var ie=te;function ne({scope:e,children:t,className:i,id:n}){return(0,o.createElement)(s.Fill,{name:`ComplementaryArea/${e}`},(0,o.createElement)("div",{id:n,className:i},t))}const re=Y((function({children:e,className:t,closeLabel:i=(0,y.__)("Close plugin"),identifier:n,header:r,headerClassName:l,icon:c,isPinnable:d=!0,panelClassName:p,scope:m,name:u,smallScreenTitle:h,title:_,toggleShortcut:g,isActiveByDefault:v,showIconLabels:f=!1}){const{isLoading:x,isActive:k,isPinned:P,activeArea:T,isSmall:C,isLarge:N}=(0,a.useSelect)((e=>{const{getActiveComplementaryArea:t,isComplementaryAreaLoading:i,isItemPinned:r}=e(W),a=t(m);return{isLoading:i(m),isActive:a===n,isPinned:r(m,n),activeArea:a,isSmall:e(j.store).isViewportMatch("< medium"),isLarge:e(j.store).isViewportMatch("large")}}),[n,m]);!function(e,t,i,n,r){const s=(0,o.useRef)(!1),l=(0,o.useRef)(!1),{enableComplementaryArea:c,disableComplementaryArea:d}=(0,a.useDispatch)(W);(0,o.useEffect)((()=>{n&&r&&!s.current?(d(e),l.current=!0):l.current&&!r&&s.current?(l.current=!1,c(e,t)):l.current&&i&&i!==t&&(l.current=!1),r!==s.current&&(s.current=r)}),[n,r,e,t,i,d,c])}(m,n,T,k,C);const{enableComplementaryArea:I,disableComplementaryArea:M,pinItem:A,unpinItem:L}=(0,a.useDispatch)(W);return(0,o.useEffect)((()=>{v&&void 0===T&&!C?I(m,n):void 0===T&&C&&M(m,n)}),[T,v,m,n,C,I,M]),(0,o.createElement)(o.Fragment,null,d&&(0,o.createElement)(ie,{scope:m},P&&(0,o.createElement)(Z,{scope:m,identifier:n,isPressed:k&&(!f||N),"aria-expanded":k,"aria-disabled":x,label:_,icon:f?b:c,showTooltip:!f,variant:f?"tertiary":void 0})),u&&d&&(0,o.createElement)(ee,{target:u,scope:m,icon:c},_),k&&(0,o.createElement)(ne,{className:w()("interface-complementary-area",t),scope:m,id:n.replace("/",":")},(0,o.createElement)(q,{className:l,closeLabel:i,onClose:()=>M(m),smallScreenTitle:h,toggleButtonProps:{label:i,shortcut:g,scope:m,identifier:n}},r||(0,o.createElement)(o.Fragment,null,(0,o.createElement)("strong",null,_),d&&(0,o.createElement)(s.Button,{className:"interface-complementary-area__pin-unpin-item",icon:P?E:S,label:P?(0,y.__)("Unpin from toolbar"):(0,y.__)("Pin to toolbar"),onClick:()=>(P?L:A)(m,n),isPressed:P,"aria-expanded":P}))),(0,o.createElement)(s.Panel,{className:p},e)))}));re.Slot=function({scope:e,...t}){return(0,o.createElement)(s.Slot,{name:`ComplementaryArea/${e}`,...t})};var ae=re,oe=({isActive:e})=>((0,o.useEffect)((()=>{let e=!1;return document.body.classList.contains("sticky-menu")&&(e=!0,document.body.classList.remove("sticky-menu")),()=>{e&&document.body.classList.add("sticky-menu")}}),[]),(0,o.useEffect)((()=>(e?document.body.classList.add("is-fullscreen-mode"):document.body.classList.remove("is-fullscreen-mode"),()=>{e&&document.body.classList.remove("is-fullscreen-mode")})),[e]),null),se=window.wp.compose;function le({children:e,className:t,ariaLabel:i,as:n="div",...r}){return(0,o.createElement)(n,{className:w()("interface-navigable-region",t),"aria-label":i,role:"region",tabIndex:"-1",...r},e)}const ce={hidden:{opacity:0},hover:{opacity:1,transition:{type:"tween",delay:.2,delayChildren:.2}},distractionFreeInactive:{opacity:1,transition:{delay:0}}};var de=(0,o.forwardRef)((function({isDistractionFree:e,footer:t,header:i,editorNotices:n,sidebar:r,secondarySidebar:a,notices:l,content:c,contentProps:d,actions:p,labels:m,className:u,enableRegionNavigation:h=!0,shortcuts:_},g){const v=(0,s.__unstableUseNavigateRegions)(_);!function(e){(0,o.useEffect)((()=>{const t=document&&document.querySelector(`html:not(.${e})`);if(t)return t.classList.toggle(e),()=>{t.classList.toggle(e)}}),[e])}("interface-interface-skeleton__html-container");const f={
/* translators: accessibility text for the top bar landmark region. */
header:(0,y.__)("Header"),
/* translators: accessibility text for the content landmark region. */
body:(0,y.__)("Content"),
/* translators: accessibility text for the secondary sidebar landmark region. */
secondarySidebar:(0,y.__)("Block Library"),
/* translators: accessibility text for the settings landmark region. */
sidebar:(0,y.__)("Settings"),
/* translators: accessibility text for the publish landmark region. */
actions:(0,y.__)("Publish"),
/* translators: accessibility text for the footer landmark region. */
footer:(0,y.__)("Footer"),...m};return(0,o.createElement)("div",{...h?v:{},ref:(0,se.useMergeRefs)([g,h?v.ref:void 0]),className:w()(u,"interface-interface-skeleton",v.className,!!t&&"has-footer")},(0,o.createElement)("div",{className:"interface-interface-skeleton__editor"},!!i&&(0,o.createElement)(le,{as:s.__unstableMotion.div,className:"interface-interface-skeleton__header","aria-label":f.header,initial:e?"hidden":"distractionFreeInactive",whileHover:e?"hover":"distractionFreeInactive",animate:e?"hidden":"distractionFreeInactive",variants:ce,transition:e?{type:"tween",delay:.8}:void 0},i),e&&(0,o.createElement)("div",{className:"interface-interface-skeleton__header"},n),(0,o.createElement)("div",{className:"interface-interface-skeleton__body"},!!a&&(0,o.createElement)(le,{className:"interface-interface-skeleton__secondary-sidebar",ariaLabel:f.secondarySidebar},a),!!l&&(0,o.createElement)("div",{className:"interface-interface-skeleton__notices"},l),(0,o.createElement)(le,{className:"interface-interface-skeleton__content",ariaLabel:f.body,...d},c),!!r&&(0,o.createElement)(le,{className:"interface-interface-skeleton__sidebar",ariaLabel:f.sidebar},r),!!p&&(0,o.createElement)(le,{className:"interface-interface-skeleton__actions",ariaLabel:f.actions},p))),!!t&&(0,o.createElement)(le,{className:"interface-interface-skeleton__footer",ariaLabel:f.footer},t))})),pe=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"}));function me({as:e=s.DropdownMenu,className:t,label:
/* translators: button label text should, if possible, be under 16 characters. */
i=(0,y.__)("Options"),popoverProps:n,toggleProps:r,children:a}){return(0,o.createElement)(e,{className:w()("interface-more-menu-dropdown",t),icon:pe,label:i,popoverProps:{placement:"bottom-end",...n,className:w()("interface-more-menu-dropdown__content",n?.className)},toggleProps:{tooltipPosition:"bottom",...r}},(e=>a(e)))}var ue=window.wp.notices;let he=function(e){return e.SUCCESS="success",e.ERROR="error",e}({});const _e=e=>({registry:t})=>t.dispatch(C.store).toggle(m,e);function ge(){return{type:"TOGGLE_INSERTER_SIDEBAR"}}function ve(){return{type:"TOGGLE_LISTVIEW_SIDEBAR"}}function fe(e){return{type:"CHANGE_PREVIEW_STATE",state:{deviceType:e}}}function we(e){return{type:"CHANGE_PREVIEW_STATE",state:{isModalOpened:e}}}function ye(e){return{type:"CHANGE_PREVIEW_STATE",state:{toEmail:e}}}const xe=(e=h)=>({registry:t})=>t.dispatch(W).enableComplementaryArea(m,e),be=()=>({registry:e})=>e.dispatch(W).disableComplementaryArea(m);function Ee(e){return{type:"TOGGLE_SETTINGS_SIDEBAR_ACTIVE_TAB",state:{activeTab:e}}}function*Se(){const e=(0,a.select)(m).getEmailPostId(),t=yield(0,a.dispatch)(c.store).saveEditedEntityRecord("postType","mailpoet_email",e,{throwOnError:!0});t.then((()=>{(0,a.dispatch)(ue.store).createErrorNotice((0,y.__)("Email saved!","mailpoet"),{type:"snackbar",isDismissible:!0})})),t.catch((()=>{(0,a.dispatch)(ue.store).createErrorNotice((0,y.__)("There was an error saving email!","mailpoet"),{type:"default",isDismissible:!0})}))}function*je(e,t){const i=(0,a.select)(m).getEmailPostId(),n=(0,a.select)(c.store).getEditedEntityRecord("postType","mailpoet_email",i),r=n?.mailpoet_data||{};yield(0,a.dispatch)(c.store).editEntityRecord("postType","mailpoet_email",i,{mailpoet_data:{...r,[e]:t}})}function*ke(e,t){if(!(0,a.select)(m).getPreviewState().isSendingPreviewEmail){yield{type:"CHANGE_PREVIEW_STATE",state:{sendingPreviewStatus:null,isSendingPreviewEmail:!0}};try{const i=window.MailPoetEmailEditor.json_api_root,n=window.MailPoetEmailEditor.api_token,r="POST",a=new FormData;a.append("token",n),a.append("action","mailpoet"),a.append("api_version",window.MailPoetEmailEditor.api_version),a.append("endpoint","newsletters"),a.append("method","sendPreview"),a.append("data[subscriber]",t),a.append("data[id]",e.toString()),yield(0,v.apiFetch)({url:i,method:r,body:a}),yield{type:"CHANGE_PREVIEW_STATE",state:{sendingPreviewStatus:he.SUCCESS,isSendingPreviewEmail:!1}}}catch(e){yield{type:"CHANGE_PREVIEW_STATE",state:{sendingPreviewStatus:he.ERROR,isSendingPreviewEmail:!1}}}}}function Pe(){const e=new URLSearchParams(window.location.search),t=parseInt(e.get("postId"),10);return{inserterSidebar:{isOpened:!1},listviewSidebar:{isOpened:!1},settingsSidebar:{activeTab:h},postId:t,editorSettings:window.MailPoetEmailEditor.editor_settings,styles:window.MailPoetEmailEditor.email_styles,layout:window.MailPoetEmailEditor.editor_layout,autosaveInterval:60,preview:{deviceType:"Desktop",toEmail:window.MailPoetEmailEditor.current_wp_user_email,isModalOpened:!1,isSendingPreviewEmail:!1,sendingPreviewStatus:null}}}function Te(e,t){switch(t.type){case"TOGGLE_INSERTER_SIDEBAR":return{...e,inserterSidebar:{...e.inserterSidebar,isOpened:!e.inserterSidebar.isOpened},listviewSidebar:{...e.listviewSidebar,isOpened:!1}};case"TOGGLE_LISTVIEW_SIDEBAR":return{...e,inserterSidebar:{...e.inserterSidebar,isOpened:!1},listviewSidebar:{...e.listviewSidebar,isOpened:!e.listviewSidebar.isOpened}};case"CHANGE_PREVIEW_STATE":return{...e,preview:{...e.preview,...t.state}};case"TOGGLE_SETTINGS_SIDEBAR_ACTIVE_TAB":return{...e,settingsSidebar:{...e.settingsSidebar,activeTab:t.state.activeTab}};default:return e}}const Ce=(0,a.createRegistrySelector)((e=>(t,i)=>!!e(C.store).get(m,i))),Ne=(0,a.createRegistrySelector)((e=>()=>!!e(W).getActiveComplementaryArea(m))),Ie=(0,a.createRegistrySelector)((e=>()=>{const t=e(m).getEmailPostId();return!!e(c.store).hasEditsForEntityRecord("postType","mailpoet_email",t)})),Me=(0,a.createRegistrySelector)((e=>()=>{const t=e(m).getEmailPostId();return!!e(c.store).getEntityRecord("postType","mailpoet_email",t)})),Ae=(0,a.createRegistrySelector)((e=>()=>{const t=e(m).getEmailPostId();return!!e(c.store).isSavingEntityRecord("postType","mailpoet_email",t)})),Le=(0,a.createRegistrySelector)((e=>()=>{const t=e(m).getEmailPostId(),i=e(c.store).getEntityRecord("postType","mailpoet_email",t);if(!i)return!0;const{content:n,mailpoet_data:r,title:a}=i;return!(n.raw||r.subject||r.preheader||a.raw)})),Be=(0,a.createRegistrySelector)((e=>()=>{const t=e(m).getEmailPostId(),i=e(c.store).getEntityRecord("postType","mailpoet_email",t);if(!i)return!0;const{content:n}=i;return!n.raw})),Re=(0,a.createRegistrySelector)((e=>()=>{const t=e(m).getEmailPostId(),i=e(c.store).getEntityRecord("postType","mailpoet_email",t);return!!i&&"sent"===i.status}));function Oe(e){return e.postId}function Fe(e){return e.inserterSidebar.isOpened}function Ve(e){return e.listviewSidebar.isOpened}function De(e){return e.settingsSidebar.activeTab}function ze(e){return e.editorSettings}function Ge(e){return e.editorSettings.__experimentalFeatures.color.palette}function He(e){return e.preview}function Ue(e){return e.styles}function $e(e){return e.layout}function We(e){return e.autosaveInterval}var Ye=window.wp.blockEditor,Ze=i(250);const qe=(0,se.createHigherOrderComponent)((e=>function(t){return"core/columns"!==t.name?(0,Ze.jsx)(e,{...t}):(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)(e,{...t}),(0,Ze.jsx)(Ye.InspectorControls,{children:(0,Ze.jsx)("style",{children:"\n      .components-panel__body .components-toggle-control .components-form-toggle { opacity: 0.3; }\n      .components-panel__body .components-toggle-control .components-form-toggle__input { pointer-events: none; }\n      .components-panel__body .components-toggle-control label { pointer-events: none; }\n    "})})]})}),"columnsEditCallback"),Je=(0,se.createHigherOrderComponent)((e=>function(t){return"core/image"!==t.name?(0,Ze.jsx)(e,{...t}):(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)(e,{...t}),(0,Ze.jsx)(Ye.InspectorControls,{children:(0,Ze.jsx)("style",{children:"\n        .components-tools-panel .components-toggle-control { display: none; }\n      "})})]})}),"imageEditCallback");var Ke=window.wp.richText;var Qe=window.wp.blocks,Xe=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{d:"M9 9v6h11V9H9zM4 20h1.5V4H4v16z"})),et=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{d:"M12.5 15v5H11v-5H4V9h7V4h1.5v5h7v6h-7Z"})),tt=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{d:"M4 15h11V9H4v6zM18.5 4v16H20V4h-1.5z"}));const it="__experimentalEmailFlexLayout";function nt(e){return(0,Qe.hasBlockSupport)(e,it)}function rt({justificationValue:e,onChange:t,isToolbar:i=!1}){const n=[{value:"left",icon:Xe,label:(0,y.__)("Justify items left")},{value:"center",icon:et,label:(0,y.__)("Justify items center")},{value:"right",icon:tt,label:(0,y.__)("Justify items right")}];if(i){const i=n.map((e=>e.value));return(0,Ze.jsx)(Ye.JustifyContentControl,{value:e,onChange:t,allowedControls:i,popoverProps:{placement:"bottom-start"}})}return(0,Ze.jsx)(s.__experimentalToggleGroupControl,{__nextHasNoMarginBottom:!0,label:(0,y.__)("Justification"),value:e,onChange:t,className:"block-editor-hooks__flex-layout-justification-controls",children:n.map((({value:e,icon:t,label:i})=>(0,Ze.jsx)(s.__experimentalToggleGroupControlOptionIcon,{value:e,icon:t,label:i},e)))})}function at({setAttributes:e,attributes:t,name:i}){if(!(0,Qe.getBlockSupport)(i,it,{}))return null;const{justifyContent:n="left"}=t.layout||{},r=i=>{e({layout:{...t.layout,justifyContent:i}})};return(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)(Ye.InspectorControls,{children:(0,Ze.jsx)(s.PanelBody,{title:(0,y.__)("Layout"),children:(0,Ze.jsx)(s.Flex,{children:(0,Ze.jsx)(s.FlexItem,{children:(0,Ze.jsx)(rt,{justificationValue:n,onChange:r})})})})}),(0,Ze.jsx)(Ye.BlockControls,{group:"block",__experimentalShareWithChildBlocks:!0,children:(0,Ze.jsx)(rt,{justificationValue:n,onChange:r,isToolbar:!0})})]})}function ot(e){return nt(e.name)?{...e,attributes:{...e.attributes,layout:{type:"object"}}}:e}const st=(0,se.createHigherOrderComponent)((e=>t=>[nt(t.name)&&(0,Ze.jsx)(at,{...t},"layout"),(0,Ze.jsx)(e,{...t},"edit")]),"withLayoutControls");function lt({block:e,props:t}){const{attributes:i}=t,{layout:n}=i,r=`is-content-justification-${n?.justifyContent||"left"}`,a=w()(r,"is-layout-email-flex is-layout-flex");return(0,Ze.jsx)(e,{...t,className:a})}const ct=(0,se.createHigherOrderComponent)((e=>function(t){return nt(t.name)?(0,Ze.jsx)(lt,{block:e,props:t}):(0,Ze.jsx)(e,{...t})}),"withLayoutStyles");var dt=window.wp.editor,pt=window.wp.mediaUtils;function mt(){const{hasEdits:e,autosaveInterval:t}=(0,a.useSelect)((e=>({hasEdits:e(m).hasEdits(),autosaveInterval:e(m).getAutosaveInterval()})),[]),{saveEditedEmail:i}=(0,a.useDispatch)(m);return(0,o.useEffect)((()=>{let n;return e&&t>0&&(n=setTimeout((()=>{i()}),1e3*t)),()=>{n&&clearTimeout(n)}}),[e,t,i]),null}function ut(){const e=(0,a.useSelect)((e=>e("core/block-editor").getSelectedBlock()),[]);return(0,Qe.hasBlockSupport)(e?.name,"__experimentalBorder",!1)?(0,Ze.jsx)(s.Fill,{name:"InspectorControlsBorder",children:(0,Ze.jsx)(s.Notice,{className:"mailpoet__grid-full-width",status:"warning",isDismissible:!1,children:(0,y.__)("Border display may vary or be unsupported in some email clients.","mailpoet")})}):null}var ht=(0,o.createElement)(x.SVG,{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-4 14.5H6c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h8v13zm4.5-.5c0 .3-.2.5-.5.5h-2.5v-13H18c.3 0 .5.2.5.5v12z"}));function _t(){const{toggleSettingsSidebarActiveTab:e}=(0,a.useDispatch)(m),t=(0,a.useSelect)((e=>e(Ye.store).getSelectedBlockClientId()),[]),i=(0,a.useSelect)((e=>e(m).getSettingsSidebarActiveTab()),[]);return(0,o.useEffect)((()=>{e(t?_:h)}),[t,e]),(0,Ze.jsx)("div",{className:"components-panel__header interface-complementary-area-header edit-post-sidebar__panel-tabs",children:(0,Ze.jsxs)("ul",{children:[(0,Ze.jsx)("li",{children:(0,Ze.jsx)("button",{onClick:()=>{e(h)},className:w()("components-button edit-post-sidebar__panel-tab",{"is-active":i===h}),"data-automation-id":"email_settings_tab",type:"button",children:(0,y.__)("Email","mailpoet")})}),(0,Ze.jsx)("li",{children:(0,Ze.jsx)("button",{onClick:()=>{e(_)},className:w()("components-button edit-post-sidebar__panel-tab",{"is-active":i===_}),"data-automation-id":"mailpoet_block_settings_tab",type:"button",children:(0,y.__)("Block")})})]})})}var gt=i(352),vt=i.n(gt);const ft=150,wt=80;function yt(){const[e]=(0,c.useEntityProp)("postType","mailpoet_email","mailpoet_data"),{updateEmailMailPoetProperty:t}=(0,a.useDispatch)(m);let i=vt()((0,y.__)("Use shortcodes to personalize your email, or learn more about [link1]best practices[/link1] and using [link2]emoji in subject lines[/link2].","mailpoet"),/\[link1\](.*?)\[\/link1\]/g,((e,t)=>(0,Ze.jsx)("a",{href:"https://www.mailpoet.com/blog/17-email-subject-line-best-practices-to-boost-engagement/",target:"_blank",rel:"noopener noreferrer",children:e},t)));i=vt()(i,/\[link2\](.*?)\[\/link2\]/g,((e,t)=>(0,Ze.jsx)("a",{href:"https://www.mailpoet.com/blog/tips-using-emojis-in-subject-lines/",target:"_blank",rel:"noopener noreferrer",children:e},t)));const n=(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)("span",{children:(0,y.__)("Subject","mailpoet")}),(0,Ze.jsx)(s.ExternalLink,{href:"https://kb.mailpoet.com/article/215-personalize-newsletter-with-shortcodes#list",children:(0,y.__)("Shortcode guide","mailpoet")})]}),r=e?.preheader?.length??0,l=(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)("span",{children:(0,y.__)("Preview text","mailpoet")}),(0,Ze.jsxs)("span",{className:w()("mailpoet-settings-panel__preview-text-length",{"mailpoet-settings-panel__preview-text-length-warning":r>wt,"mailpoet-settings-panel__preview-text-length-error":r>ft}),children:[r,"/",ft]})]});return(0,Ze.jsxs)(s.PanelBody,{title:(0,y.__)("Details","mailpoet"),className:"mailpoet-email-editor__settings-panel",children:[(0,Ze.jsx)(s.TextareaControl,{className:"mailpoet-settings-panel__subject",label:n,placeholder:(0,y.__)("Eg. The summer sale is here!","mailpoet"),value:e?.subject??"",onChange:e=>t("subject",e),"data-automation-id":"email_subject"}),(0,Ze.jsx)("div",{className:"mailpoet-settings-panel__help",children:(0,Ze.jsx)(s.__experimentalText,{children:i})}),(0,Ze.jsx)(s.TextareaControl,{className:"mailpoet-settings-panel__preview-text",label:l,placeholder:(0,y.__)("Add a preview text to capture subscribers' attention and increase open rates.","mailpoet"),value:e?.preheader??"",onChange:e=>t("preheader",e),"data-automation-id":"email_preview_text"}),(0,Ze.jsx)("div",{className:"mailpoet-settings-panel__help",children:(0,Ze.jsx)(s.__experimentalText,{children:(0,o.createInterpolateElement)((0,y.__)("<link>This text</link> will appear in the inbox, underneath the subject line.","mailpoet"),{link:(0,Ze.jsx)("a",{href:new URL("article/418-preview-text","https://kb.mailpoet.com/").toString(),target:"_blank",rel:"noopener noreferrer"},"preview-text-kb")})})})]})}var xt=(0,o.forwardRef)((function({icon:e,size:t=24,...i},n){return(0,o.cloneElement)(e,{width:t,height:t,...i,ref:n})})),bt=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{fillRule:"evenodd",d:"M6.863 13.644L5 13.25h-.5a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5H5L18 6.5h2V16h-2l-3.854-.815.026.008a3.75 3.75 0 01-7.31-1.549zm1.477.313a2.251 2.251 0 004.356.921l-4.356-.921zm-2.84-3.28L18.157 8h.343v6.5h-.343L5.5 11.823v-1.146z",clipRule:"evenodd"}));function Et(){return(0,Ze.jsx)(s.Panel,{className:"mailpoet-email-sidebar__email-type-info",children:(0,Ze.jsx)(s.PanelBody,{children:(0,Ze.jsxs)(s.PanelRow,{children:[(0,Ze.jsx)("span",{className:"mailpoet-email-type-info__icon",children:(0,Ze.jsx)(xt,{icon:bt})}),(0,Ze.jsxs)("div",{className:"mailpoet-email-type-info__content",children:[(0,Ze.jsx)("h2",{children:(0,y.__)("Newsletter","mailpoet")}),(0,Ze.jsx)("span",{children:(0,y.__)("Send or schedule a newsletter to connect with your subscribers.","mailpoet")})]})]})})})}function St(){return(0,Ze.jsxs)(s.Panel,{children:[(0,Ze.jsx)(Et,{}),(0,Ze.jsx)(yt,{})]})}function jt(e){const t=(0,a.useSelect)((e=>e(m).getSettingsSidebarActiveTab()),[]);return(0,Ze.jsxs)(ae,{identifier:u,className:"edit-post-sidebar",header:(0,Ze.jsx)(_t,{}),icon:ht,scope:m,smallScreenTitle:(0,y.__)("No title","mailpoet"),isActiveByDefault:!0,...e,children:[t===h&&(0,Ze.jsx)(St,{}),t===_&&(0,Ze.jsx)(s.Panel,{children:(0,Ze.jsx)(Ye.BlockInspector,{})})]})}var kt=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{d:"M18 11.2h-5.2V6h-1.6v5.2H6v1.6h5.2V18h1.6v-5.2H18z"})),Pt=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{d:"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z"})),Tt=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{d:"M15.6 6.5l-1.1 1 2.9 3.3H8c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.3-.5h9.2L14.5 15l1.1 1.1 4.6-4.6-4.6-5z"})),Ct=(0,o.createElement)(x.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,o.createElement)(x.Path,{d:"M3 6h11v1.5H3V6Zm3.5 5.5h11V13h-11v-1.5ZM21 17H10v1.5h11V17Z"})),Nt=window.wp.keycodes;function It(){return(0,Ze.jsx)(me,{className:"edit-site-more-menu",popoverProps:{className:"edit-site-more-menu__content"},children:()=>(0,Ze.jsxs)(s.MenuGroup,{label:(0,y._x)("View","noun","mailpoet"),children:[(0,Ze.jsx)(C.PreferenceToggleMenuItem,{scope:m,name:"fixedToolbar",label:(0,y.__)("Top toolbar","mailpoet"),info:(0,y.__)("Access all block and document tools in a single place","mailpoet"),messageActivated:(0,y.__)("Top toolbar activated","mailpoet"),messageDeactivated:(0,y.__)("Top toolbar deactivated","mailpoet")}),(0,Ze.jsx)(C.PreferenceToggleMenuItem,{scope:m,name:"focusMode",label:(0,y.__)("Spotlight mode","mailpoet"),info:(0,y.__)("Focus at one block at a time","mailpoet"),messageActivated:(0,y.__)("Spotlight mode activated","mailpoet"),messageDeactivated:(0,y.__)("Spotlight mode deactivated","mailpoet")}),(0,Ze.jsx)(C.PreferenceToggleMenuItem,{scope:m,name:"fullscreenMode",label:(0,y.__)("Fullscreen mode","mailpoet"),info:(0,y.__)("Work without distraction","mailpoet"),messageActivated:(0,y.__)("Fullscreen mode activated","mailpoet"),messageDeactivated:(0,y.__)("Fullscreen mode deactivated","mailpoet"),shortcut:Nt.displayShortcut.secondary("f")})]})})}var Mt=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{d:"M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z"})),At=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{d:"M20.5 16h-.7V8c0-1.1-.9-2-2-2H6.2c-1.1 0-2 .9-2 2v8h-.7c-.8 0-1.5.7-1.5 1.5h20c0-.8-.7-1.5-1.5-1.5zM5.7 8c0-.3.2-.5.5-.5h11.6c.3 0 .5.2.5.5v7.6H5.7V8z"})),Lt=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{d:"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z"})),Bt=window.wp.url;function Rt(){const{requestSendingNewsletterPreview:e,togglePreviewModal:t,updateSendPreviewEmail:i}=(0,a.useDispatch)(m),{toEmail:n,isSendingPreviewEmail:r,sendingPreviewStatus:l,isModalOpened:d}=(0,a.useSelect)((e=>e(m).getPreviewState()),[]),[p]=(0,c.useEntityProp)("postType","mailpoet_email","mailpoet_data"),u=()=>{e(p.id,n)},h=()=>t(!1);return d?(0,Ze.jsxs)(s.Modal,{className:"mailpoet-send-preview-email",title:(0,y.__)("Send a test email","mailpoet"),onRequestClose:h,focusOnMount:"firstContentElement",children:[l===he.ERROR?(0,Ze.jsxs)("div",{className:"mailpoet-send-preview-modal-notice-error",children:[(0,y.__)("Sorry, we were unable to send this email.","mailpoet"),(0,Ze.jsxs)("ul",{children:[(0,Ze.jsx)("li",{children:(0,o.createInterpolateElement)((0,y.__)("Please check your <link>sending method configuration</link> with your hosting provider.","mailpoet"),{link:(0,Ze.jsx)("a",{href:"admin.php?page=mailpoet-settings#mta",target:"_blank",rel:"noopener noreferrer"})})}),(0,Ze.jsx)("li",{children:(0,o.createInterpolateElement)((0,y.__)("Or, sign up for MailPoet Sending Service to easily send emails. <link>Sign up for free</link>","mailpoet"),{link:(0,Ze.jsx)("a",{href:new URL("free-plan","https://www.mailpoet.com/").toString(),target:"_blank",rel:"noopener noreferrer"},"sign-up-for-free")})})]})]}):null,(0,Ze.jsx)("p",{children:(0,o.createInterpolateElement)((0,y.__)("Send yourself a test email to test how your email would look like in different email apps. You can also test your spam score by sending a test email to <link1>{$serviceName}</link1>. <link2>Learn more</link2>.","mailpoet").replace("{$serviceName}","Mail Tester"),{link1:(0,Ze.jsx)("a",{href:"https://www.mail-tester.com/",target:"_blank",rel:"noopener noreferrer",tabIndex:-1}),link2:(0,Ze.jsx)("a",{href:"https://kb.mailpoet.com/article/147-test-your-spam-score-with-mail-tester",target:"_blank",rel:"noopener noreferrer",tabIndex:-1})})}),(0,Ze.jsx)(s.TextControl,{label:(0,y.__)("Send to","mailpoet"),onChange:e=>{i(e)},onKeyDown:e=>{const{keyCode:t}=e;t===Nt.ENTER&&(e.preventDefault(),u())},value:n,type:"email",required:!0}),l===he.SUCCESS?(0,Ze.jsxs)("p",{className:"mailpoet-send-preview-modal-notice-success",children:[(0,Ze.jsx)(xt,{icon:b,style:{fill:"#4AB866"}}),(0,y.__)("Test email sent successfully!","mailpoet")]}):null,(0,Ze.jsxs)("div",{className:"mailpoet-send-preview-modal-footer",children:[(0,Ze.jsx)(s.Button,{variant:"tertiary",onClick:h,children:(0,y.__)("Close","mailpoet")}),(0,Ze.jsx)(s.Button,{variant:"primary",onClick:u,disabled:r||!(0,Bt.isEmail)(n),children:r?(0,y.__)("Sending...","mailpoet"):(0,y.__)("Send test email","mailpoet")})]})]}):null}function Ot(){const[e]=(0,c.useEntityProp)("postType","mailpoet_email","mailpoet_data"),t=(0,a.useSelect)((e=>{const{deviceType:t}=e(m).getPreviewState();return t}),[]),{changePreviewDeviceType:i,togglePreviewModal:n}=(0,a.useDispatch)(m),r=e?.preview_url||"",o=e=>{i(e)},l={mobile:Mt,desktop:At};return(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)(s.DropdownMenu,{className:"mailpoet-preview-dropdown",label:(0,y.__)("Preview","mailpoet"),icon:l[t.toLowerCase()],children:({onClose:e})=>(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsxs)(s.MenuGroup,{children:[(0,Ze.jsx)(s.MenuItem,{className:"block-editor-post-preview__button-resize",onClick:()=>o("Desktop"),icon:"Desktop"===t&&b,children:(0,y.__)("Desktop")}),(0,Ze.jsx)(s.MenuItem,{className:"block-editor-post-preview__button-resize",onClick:()=>o("Mobile"),icon:"Mobile"===t&&b,children:(0,y.__)("Mobile")})]}),(0,Ze.jsx)(s.MenuGroup,{children:(0,Ze.jsx)(s.MenuItem,{className:"block-editor-post-preview__button-resize",onClick:()=>{n(!0),e()},children:(0,y.__)("Send a test email","mailpoet")})}),r?(0,Ze.jsx)(s.MenuGroup,{children:(0,Ze.jsx)("div",{className:"edit-post-header-preview__grouping-external",children:(0,Ze.jsxs)(s.Button,{className:"edit-post-header-preview__button-external",onClick:()=>{var e;e=r,window.open(e,"_blank","noreferrer")},children:[(0,y.__)("Preview in new tab"),(0,Ze.jsx)(xt,{icon:Lt})]})})}):null]})}),(0,Ze.jsx)(Rt,{})]})}var Ft=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{d:"M17.3 10.1c0-2.5-2.1-4.4-4.8-4.4-2.2 0-4.1 1.4-4.6 3.3h-.2C5.7 9 4 10.7 4 12.8c0 2.1 1.7 3.8 3.7 3.8h9c1.8 0 3.2-1.5 3.2-3.3.1-1.6-1.1-2.9-2.6-3.2zm-.5 5.1h-9c-1.2 0-2.2-1.1-2.2-2.3s1-2.4 2.2-2.4h1.3l.3-1.1c.4-1.3 1.7-2.2 3.2-2.2 1.8 0 3.3 1.3 3.3 2.9v1.3l1.3.2c.8.1 1.4.9 1.4 1.8-.1 1-.9 1.8-1.8 1.8z"}));function Vt(){const{saveEditedEmail:e}=(0,a.useDispatch)(m),{hasEdits:t,isEmpty:i,isSaving:n}=(0,a.useSelect)((e=>({hasEdits:e(m).hasEdits(),isEmpty:e(m).isEmpty(),isSaving:e(m).isSaving()})),[]),r=!i&&!n&&!t,o=i||n||r;let l=(0,y.__)("Save Draft","mailpoet");return r?l=(0,y.__)("Saved","mailpoet"):n&&(l=(0,y.__)("Saving","mailpoet")),(0,Ze.jsxs)(s.Button,{variant:"tertiary",disabled:o,onClick:e,children:[n&&(0,Ze.jsx)(xt,{icon:Ft}),r&&(0,Ze.jsx)(xt,{icon:b}),l]})}var Dt=(0,o.createElement)(x.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,o.createElement)(x.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}));function zt(){const{showIconLabels:e}=(0,a.useSelect)((e=>({showIconLabels:e(m).isFeatureActive("showIconLabels"),postId:e(m).getEmailPostId()})),[]),[t="",i]=(0,c.useEntityProp)("postType","mailpoet_email","title"),n=(0,o.useRef)(null);return(0,Ze.jsx)("div",{ref:n,className:"mailpoet-email-editor-campaign-name",children:(0,Ze.jsx)(s.Dropdown,{popoverProps:{placement:"bottom",anchor:n.current},contentClassName:"mailpoet-email-editor-campaign-name__dropdown",renderToggle:({isOpen:i,onToggle:n})=>(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)(s.Button,{onClick:n,className:"mailpoet-email-campaign-name__link",children:(0,Ze.jsxs)(s.__experimentalText,{size:"body",as:"h1",children:[(0,Ze.jsx)(s.VisuallyHidden,{as:"span",children:(0,y.__)("Editing email:","mailpoet")}),t]})}),(0,Ze.jsx)(s.Button,{className:"mailpoet-email-campaign-name__toggle",icon:Dt,"aria-expanded":i,"aria-haspopup":"true",onClick:n,label:(0,y.__)("Change campaign name","mailpoet"),children:e&&(0,y.__)("Rename","mailpoet")})]}),renderContent:()=>(0,Ze.jsx)("div",{className:"mailpoet-email-editor-email-title-edit",children:(0,Ze.jsx)(s.TextControl,{label:(0,y.__)("Campaign name","mailpoet"),value:t,onChange:e=>{i(e)},name:"campaign_name",help:(0,y.__)("Name your email campaign to indicate its purpose. This would only be visible to you and not shown to your subscribers.","mailpoet")})})})})}function Gt(){const[e]=(0,c.useEntityProp)("postType","mailpoet_email","mailpoet_data"),{hasEmptyContent:t}=(0,a.useSelect)((e=>({hasEmptyContent:e(m).hasEmptyContent()})),[]),{isEmailSent:i}=(0,a.useSelect)((e=>({isEmailSent:e(m).isEmailSent()})),[]),n=e;return(0,Ze.jsx)(s.Button,{variant:"primary",onClick:()=>{window.location.href=`admin.php?page=mailpoet-newsletters#/send/${n.id}`},disabled:t||i,children:(0,y.__)("Send","mailpoet")})}const Ht=s.ToolbarItem;function Ut(){const e=(0,o.useRef)(),t=(0,o.useRef)(),i=(0,o.useRef)(),n=(0,o.useRef)(),{toggleInserterSidebar:r,toggleListviewSidebar:l}=(0,a.useDispatch)(m),{undo:d,redo:p}=(0,a.useDispatch)(c.store),{isInserterSidebarOpened:u,isListviewSidebarOpened:h,hasUndo:_,hasRedo:g}=(0,a.useSelect)((e=>({isInserterSidebarOpened:e(m).isInserterSidebarOpened(),isListviewSidebarOpened:e(m).isListviewSidebarOpened(),hasUndo:e(c.store).hasUndo(),hasRedo:e(c.store).hasRedo()})),[]),v=e=>{e.preventDefault()},f=u?(0,y.__)("Close"):(0,y.__)("Add");return(0,Ze.jsxs)("div",{className:"edit-post-header",children:[(0,Ze.jsxs)("div",{className:"edit-post-header__toolbar",children:[(0,Ze.jsx)(Ye.NavigableToolbar,{className:"edit-post-header-toolbar","aria-label":(0,y.__)("Email document tools","mailpoet"),children:(0,Ze.jsxs)("div",{className:"edit-post-header-toolbar__left",children:[(0,Ze.jsx)(Ht,{ref:e,as:s.Button,className:"edit-post-header-toolbar__inserter-toggle",variant:"primary",isPressed:u,onMouseDown:v,onClick:r,disabled:!1,icon:kt,label:f,showTooltip:!0,"aria-expanded":u}),(0,Ze.jsx)(Ht,{ref:i,as:s.Button,className:"editor-history__undo",isPressed:!1,onMouseDown:v,onClick:d,disabled:!_,icon:Pt,label:(0,y.__)("Undo"),showTooltip:!0}),(0,Ze.jsx)(Ht,{ref:n,as:s.Button,className:"editor-history__redo",isPressed:!1,onMouseDown:v,onClick:p,disabled:!g,icon:Tt,label:(0,y.__)("Redo"),showTooltip:!0}),(0,Ze.jsx)(Ht,{ref:t,as:s.Button,className:"edit-post-header-toolbar__document-overview-toggle",isPressed:h,onMouseDown:v,onClick:l,disabled:!1,icon:Ct,label:(0,y.__)("List view","mailpoet"),showTooltip:!0,"aria-expanded":u})]})}),(0,Ze.jsx)("div",{className:"edit-post-header__center",children:(0,Ze.jsx)(zt,{})})]}),(0,Ze.jsxs)("div",{className:"edit-post-header__settings",children:[(0,Ze.jsx)(Vt,{}),(0,Ze.jsx)(Ot,{}),(0,Ze.jsx)(Gt,{}),(0,Ze.jsx)(ie.Slot,{scope:m}),(0,Ze.jsx)(It,{})]})]})}function $t(){return(0,Ze.jsx)("div",{className:"edit-post-editor__inserter-panel edit-post-editor__document-overview-panel",children:(0,Ze.jsx)("div",{className:"edit-post-editor__list-view-panel-content",children:(0,Ze.jsx)("div",{className:"edit-post-editor__list-view-container",children:(0,Ze.jsx)(Ye.__experimentalListView,{})})})})}function Wt(){return(0,Ze.jsx)("div",{className:"edit-post-editor__inserter-panel ",children:(0,Ze.jsx)("div",{className:"edit-post-editor__inserter-panel-content",children:(0,Ze.jsx)(Ye.__experimentalLibrary,{showMostUsedBlocks:!0,showInserterHelpPanel:!1,rootClientId:void 0,__experimentalInsertionIndex:void 0})})})}function Yt(){const{notices:e}=(0,a.useSelect)((e=>({notices:e(ue.store).getNotices()})),[]),{removeNotice:t}=(0,a.useDispatch)(ue.store),i=e.filter((({isDismissible:e,type:t})=>e&&"default"===t)),n=e.filter((({isDismissible:e,type:t})=>!e&&"default"===t));return(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)(s.NoticeList,{notices:n,className:"components-editor-notices__pinned"}),(0,Ze.jsx)(s.NoticeList,{notices:i,className:"components-editor-notices__dismissible",onRemove:t})]})}function Zt(){const{notices:e}=(0,a.useSelect)((e=>({notices:e(ue.store).getNotices()})),[]),{removeNotice:t}=(0,a.useDispatch)(ue.store),i=e.filter((({type:e})=>"snackbar"===e));return(0,Ze.jsx)(s.SnackbarList,{notices:i,className:"components-editor-notices__snackbar",onRemove:t})}function qt(){const{isEmailSent:e}=(0,a.useSelect)((e=>({isEmailSent:e(m).isEmailSent()})),[]);return(0,o.useEffect)((()=>{e&&(0,a.dispatch)(ue.store).createNotice("warning",(0,y.__)("This email has already been sent. It can be edited, but not sent again. Duplicate this email if you want to send it again.","mailpoet"),{isDismissible:!1})}),[e]),null}var Jt=(0,o.createElement)(x.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,o.createElement)(x.Path,{d:"M12 4c-4.4 0-8 3.6-8 8v.1c0 4.1 3.2 7.5 7.2 7.9h.8c4.4 0 8-3.6 8-8s-3.6-8-8-8zm0 15V5c3.9 0 7 3.1 7 7s-3.1 7-7 7z"})),Kt=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{d:"M6.9 7L3 17.8h1.7l1-2.8h4.1l1 2.8h1.7L8.6 7H6.9zm-.7 6.6l1.5-4.3 1.5 4.3h-3zM21.6 17c-.1.1-.2.2-.3.2-.1.1-.2.1-.4.1s-.3-.1-.4-.2c-.1-.1-.1-.3-.1-.6V12c0-.5 0-1-.1-1.4-.1-.4-.3-.7-.5-1-.2-.2-.5-.4-.9-.5-.4 0-.8-.1-1.3-.1s-1 .1-1.4.2c-.4.1-.7.3-1 .4-.2.2-.4.3-.6.5-.1.2-.2.4-.2.7 0 .3.1.5.2.8.2.2.4.3.8.3.3 0 .6-.1.8-.3.2-.2.3-.4.3-.7 0-.3-.1-.5-.2-.7-.2-.2-.4-.3-.6-.4.2-.2.4-.3.7-.4.3-.1.6-.1.8-.1.3 0 .6 0 .8.1.2.1.4.3.5.5.1.2.2.5.2.9v1.1c0 .3-.1.5-.3.6-.2.2-.5.3-.9.4-.3.1-.7.3-1.1.4-.4.1-.8.3-1.1.5-.3.2-.6.4-.8.7-.2.3-.3.7-.3 1.2 0 .6.2 1.1.5 1.4.3.4.9.5 1.6.5.5 0 1-.1 1.4-.3.4-.2.8-.6 1.1-1.1 0 .4.1.7.3 1 .2.3.6.4 1.2.4.4 0 .7-.1.9-.2.2-.1.5-.3.7-.4h-.3zm-3-.9c-.2.4-.5.7-.8.8-.3.2-.6.2-.8.2-.4 0-.6-.1-.9-.3-.2-.2-.3-.6-.3-1.1 0-.5.1-.9.3-1.2s.5-.5.8-.7c.3-.2.7-.3 1-.5.3-.1.6-.3.7-.6v3.4z"})),Qt=(0,o.createElement)(x.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,o.createElement)(x.Path,{d:"M17.2 10.9c-.5-1-1.2-2.1-2.1-3.2-.6-.9-1.3-1.7-2.1-2.6L12 4l-1 1.1c-.6.9-1.3 1.7-2 2.6-.8 1.2-1.5 2.3-2 3.2-.6 1.2-1 2.2-1 3 0 3.4 2.7 6.1 6.1 6.1s6.1-2.7 6.1-6.1c0-.8-.3-1.8-1-3zm-5.1 7.6c-2.5 0-4.6-2.1-4.6-4.6 0-.3.1-1 .8-2.3.5-.9 1.1-1.9 2-3.1.7-.9 1.3-1.7 1.8-2.3.7.8 1.3 1.6 1.8 2.3.8 1.1 1.5 2.2 2 3.1.7 1.3.8 2 .8 2.3 0 2.5-2.1 4.6-4.6 4.6z"})),Xt=(0,o.createElement)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(x.Path,{d:"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})),ei=function(){return(0,Ze.jsxs)(s.__experimentalItemGroup,{children:[(0,Ze.jsx)(s.__experimentalNavigatorButton,{path:"/typography",children:(0,Ze.jsx)(s.__experimentalItem,{children:(0,Ze.jsxs)(s.__experimentalHStack,{justify:"flex-start",children:[(0,Ze.jsx)(s.Icon,{icon:Kt,size:24}),(0,Ze.jsx)(s.FlexItem,{children:(0,y.__)("Typography","mailpoet")})]})})}),(0,Ze.jsx)(s.__experimentalNavigatorButton,{path:"/colors",children:(0,Ze.jsx)(s.__experimentalItem,{children:(0,Ze.jsxs)(s.__experimentalHStack,{justify:"flex-start",children:[(0,Ze.jsx)(s.Icon,{icon:Qt,size:24}),(0,Ze.jsx)(s.FlexItem,{children:(0,y.__)("Colors","mailpoet")})]})})}),(0,Ze.jsx)(s.__experimentalNavigatorButton,{path:"/layout",children:(0,Ze.jsx)(s.__experimentalItem,{children:(0,Ze.jsxs)(s.__experimentalHStack,{justify:"flex-start",children:[(0,Ze.jsx)(s.Icon,{icon:Xt,size:24}),(0,Ze.jsx)(s.FlexItem,{children:(0,y.__)("Layout","mailpoet")})]})})})]})};const ti={start:{scale:1,opacity:1},hover:{scale:0,opacity:0}},ii={hover:{opacity:1},start:{opacity:.5}},ni={hover:{scale:1,opacity:1},start:{scale:0,opacity:0}},ri=152,ai=32;function oi({label:e,isFocused:t,withHoverView:i}){const{styles:n,colors:r}=(0,a.useSelect)((e=>({styles:e(m).getStyles(),colors:e(m).getPaletteColors()})),[]),l=n.colors.background,c=n.elements.h1.fontFamily,d=n.elements.h1.color,p=n.elements.h1.fontWeight,u=r.theme.concat(r.theme),h=u.filter((({color:e})=>e.toLowerCase()!==l.toLowerCase()&&e.toLowerCase()!==d.toLowerCase())).slice(0,2),[_,g]=(0,o.useState)(!1);return(0,Ze.jsx)("div",{onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:(0,Ze.jsxs)(s.__unstableMotion.div,{style:{height:1*ri,width:"100%",background:l,cursor:i?"pointer":void 0},initial:"start",animate:(_||t)&&e?"hover":"start",children:[(0,Ze.jsx)(s.__unstableMotion.div,{variants:ti,style:{height:"100%",overflow:"hidden"},children:(0,Ze.jsxs)(s.__experimentalHStack,{spacing:10,justify:"center",style:{height:"100%",overflow:"hidden"},children:[(0,Ze.jsx)(s.__unstableMotion.div,{style:{fontFamily:c,fontSize:65,color:d,fontWeight:p},animate:{scale:1,opacity:1},initial:{scale:.1,opacity:0},transition:{delay:.3,type:"tween"},children:"Aa"}),(0,Ze.jsx)(s.__experimentalVStack,{spacing:4,children:h.map((({slug:e,color:t},i)=>(0,Ze.jsx)(s.__unstableMotion.div,{style:{height:1*ai,width:1*ai,background:t,borderRadius:1*ai/2},animate:{scale:1,opacity:1},initial:{scale:.1,opacity:0},transition:{delay:1===i?.2:.1}},e)))})]})}),(0,Ze.jsx)(s.__unstableMotion.div,{variants:i&&ii,style:{height:"100%",width:"100%",position:"absolute",top:0,overflow:"hidden",filter:"blur(60px)",opacity:.1},children:(0,Ze.jsx)(s.__experimentalHStack,{spacing:0,justify:"flex-start",style:{height:"100%",overflow:"hidden"},children:u.slice(0,4).map((({color:e})=>(0,Ze.jsx)("div",{style:{height:"100%",background:e,flexGrow:1}},e)))})}),(0,Ze.jsx)(s.__unstableMotion.div,{variants:ni,style:{height:"100%",width:"100%",overflow:"hidden",position:"absolute",top:0},children:(0,Ze.jsx)(s.__experimentalVStack,{spacing:3,justify:"center",style:{height:"100%",overflow:"hidden",padding:10,boxSizing:"border-box"},children:e&&(0,Ze.jsx)("div",{style:{fontSize:40,fontFamily:c,color:d,fontWeight:p,lineHeight:"1em",textAlign:"center"},children:e})})})]})})}function si(){return(0,Ze.jsx)(s.Card,{size:"small",className:"edit-site-global-styles-screen-root",variant:"primary",children:(0,Ze.jsx)(s.CardBody,{children:(0,Ze.jsxs)(s.__experimentalVStack,{spacing:4,children:[(0,Ze.jsx)(s.Card,{children:(0,Ze.jsx)(s.CardMedia,{children:(0,Ze.jsx)(oi,{})})}),(0,Ze.jsx)(ei,{})]})})})}function li(e){return(0,Ze.jsx)(ae,{identifier:g,className:"mailpoet-email-editor__styles-panel",header:(0,y.__)("Styles","mailpoet"),icon:Jt,scope:m,smallScreenTitle:(0,y.__)("No title","mailpoet"),...e,children:(0,Ze.jsx)(s.Panel,{children:(0,Ze.jsxs)(s.__experimentalNavigatorProvider,{initialPath:"/",children:[(0,Ze.jsx)(s.__experimentalNavigatorScreen,{path:"/",children:(0,Ze.jsx)(si,{})}),(0,Ze.jsxs)(s.__experimentalNavigatorScreen,{path:"/typography",children:[(0,Ze.jsx)(s.__experimentalNavigatorToParentButton,{children:"Back"}),(0,Ze.jsx)("div",{children:"TODO: Typography screen"})]}),(0,Ze.jsxs)(s.__experimentalNavigatorScreen,{path:"/colors",children:[(0,Ze.jsx)(s.__experimentalNavigatorToParentButton,{children:"Back"}),(0,Ze.jsx)("div",{children:"TODO: Typography screen"})]}),(0,Ze.jsxs)(s.__experimentalNavigatorScreen,{path:"/layout",children:[(0,Ze.jsx)(s.__experimentalNavigatorToParentButton,{children:"Back"}),(0,Ze.jsx)("div",{children:"TODO: Typography screen"})]})]})})})}function ci(){const{isFullscreenActive:e,isSidebarOpened:t,initialSettings:i,previewDeviceType:n,isInserterSidebarOpened:r,isListviewSidebarOpened:o,isEmailLoaded:s,postId:l,canUserEditMedia:d,hasFixedToolbar:p,focusMode:u,styles:h,layout:_}=(0,a.useSelect)((e=>({isFullscreenActive:e(m).isFeatureActive("fullscreenMode"),isSidebarOpened:e(m).isSidebarOpened(),isInserterSidebarOpened:e(m).isInserterSidebarOpened(),isListviewSidebarOpened:e(m).isListviewSidebarOpened(),postId:e(m).getEmailPostId(),initialSettings:e(m).getInitialEditorSettings(),previewDeviceType:e(m).getPreviewState().deviceType,isEmailLoaded:e(m).isEmailLoaded(),canUserEditMedia:e(c.store).canUser("create","media"),hasFixedToolbar:e(m).isFeatureActive("fixedToolbar"),focusMode:e(m).isFeatureActive("focusMode"),styles:e(m).getStyles(),layout:e(m).getLayout()})),[]),g=w()("interface-interface-skeleton","edit-post-layout",{"is-sidebar-opened":t}),[v,f,y]=(0,c.useEntityBlockEditor)("postType","mailpoet_email",{id:l}),x=h.layout.background;let b=(0,Ye.__experimentalUseResizeCanvas)(n);b||(b={height:"auto",margin:"4rem auto",width:h.layout.width,display:"flex",flexFlow:"column"}),b.transition="all 0.3s ease 0s";const E={background:"Desktop"===n?x:"transparent"},S={...i,mediaUpload:d?pt.uploadMedia:null,hasFixedToolbar:p,focusMode:u};return s?(0,Ze.jsxs)(Ye.BlockEditorProvider,{value:v,onInput:f,onChange:y,settings:S,useSubRegistry:!1,children:[(0,Ze.jsx)(oe,{isActive:e}),(0,Ze.jsx)(dt.UnsavedChangesWarning,{}),(0,Ze.jsx)(mt,{}),(0,Ze.jsx)(qt,{}),(0,Ze.jsx)(jt,{}),(0,Ze.jsx)(li,{}),(0,Ze.jsx)(de,{className:g,header:(0,Ze.jsx)(Ut,{}),editorNotices:(0,Ze.jsx)(Yt,{}),notices:(0,Ze.jsx)(Zt,{}),content:(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)(Yt,{}),(0,Ze.jsx)("div",{className:"edit-post-visual-editor",children:(0,Ze.jsx)(Ye.BlockSelectionClearer,{className:"edit-post-visual-editor__content-area",style:E,children:(0,Ze.jsxs)("div",{style:b,className:w()({"is-mobile-preview":"Mobile"===n,"is-desktop-preview":"Desktop"===n}),children:[(0,Ze.jsx)(Ye.__unstableEditorStyles,{styles:S.styles,scope:".editor-styles-wrapper"}),(0,Ze.jsxs)(Ye.BlockSelectionClearer,{className:"editor-styles-wrapper block-editor-writing-flow",style:{width:"100%"},children:[(0,Ze.jsx)(Ye.BlockEditorKeyboardShortcuts.Register,{}),(0,Ze.jsx)(Ye.BlockTools,{children:(0,Ze.jsx)(Ye.WritingFlow,{children:(0,Ze.jsx)(Ye.ObserveTyping,{children:(0,Ze.jsx)(Ye.BlockList,{className:w()({"is-mobile-preview":"Mobile"===n},"is-layout-constrained has-global-padding"),layout:_})})})})]})]})})})]}),sidebar:(0,Ze.jsx)(ae.Slot,{scope:m}),secondarySidebar:r&&(0,Ze.jsx)(Wt,{})||o&&(0,Ze.jsx)($t,{})}),(0,Ze.jsx)(ut,{})]}):null}function di(){const{isSidebarOpened:e,hasEdits:t,isSaving:i}=(0,a.useSelect)((e=>({isSidebarOpened:e(m).isSidebarOpened(),isSaving:e(m).isSaving(),hasEdits:e(m).hasEdits()}))),{openSidebar:n,closeSidebar:r,saveEditedEmail:s,toggleFeature:c}=(0,a.useDispatch)(m),{registerShortcut:d}=(0,a.useDispatch)(l.store);return(0,o.useEffect)((()=>{d({name:"mailpoet/email-editor/toggle-fullscreen",category:"global",description:(0,y.__)("Toggle fullscreen mode.","mailpoet"),keyCombination:{modifier:"secondary",character:"f"}}),d({name:"mailpoet/email-editor/toggle-sidebar",category:"global",description:(0,y.__)("Show or hide the settings sidebar.","mailpoet"),keyCombination:{modifier:"primaryShift",character:","}}),d({name:"mailpoet/email-editor/save",category:"global",description:(0,y.__)("Save your changes.","mailpoet"),keyCombination:{modifier:"primary",character:"s"}})}),[d]),(0,l.useShortcut)("mailpoet/email-editor/toggle-fullscreen",(()=>{c("fullscreenMode")})),(0,l.useShortcut)("mailpoet/email-editor/toggle-sidebar",(t=>{t.preventDefault(),e?r():n()})),(0,l.useShortcut)("mailpoet/email-editor/save",(e=>{e.preventDefault(),t&&!i&&s()})),null}function pi(){const{postId:e}=(0,a.useSelect)((e=>({postId:e(m).getEmailPostId()})),[]);return(0,Ze.jsx)(o.StrictMode,{children:(0,Ze.jsx)(l.ShortcutProvider,{children:(0,Ze.jsxs)(s.SlotFillProvider,{children:[(0,Ze.jsx)(di,{}),(0,Ze.jsx)(c.EntityProvider,{kind:"postType",type:"mailpoet_email",id:e,children:(0,Ze.jsx)(ci,{})})]})})})}function mi(e){const t=document.getElementById(e);t&&((()=>{const e=(0,a.createReduxStore)(m,{actions:n,controls:v.controls,selectors:r,reducer:Te,initialState:Pe()});(0,a.register)(e)})(),(0,p.addFilter)("blocks.registerBlockType","mailpoet-email-editor/layout/addAttribute",ot),(0,p.addFilter)("editor.BlockListBlock","mailpoet-email-editor/with-layout-styles",ct),(0,p.addFilter)("editor.BlockEdit","mailpoet-email-editor/with-inspector-controls",st),(0,p.addFilter)("blocks.registerBlockType","mailpoet-email-editor/change-columns-allowed-nesting",((e,t)=>{if("core/column"===t){const t=(0,a.select)(m).getInitialEditorSettings(),i=t.allowedBlockTypes instanceof Array?t.allowedBlockTypes:[],n=[];return i.forEach((e=>{"core/column"!==e&&"core/columns"!==e&&"core/list-item"!==e&&"core/button"!==e&&n.push(e)})),{...e,attributes:{...e.attributes,allowedBlocks:{type:"array",default:n}}}}return e})),(0,p.addFilter)("editor.BlockEdit","mailpoet-email-editor/deactivate-stack-on-mobile",qe),(0,p.addFilter)("editor.BlockEdit","mailpoet-email-editor/hide-expand-on-click",Je),(0,p.addFilter)("blocks.registerBlockType","mailpoet-email-editor/deactivate-image-filter",((e,t)=>"core/image"===t?{...e,supports:{...e.supports,filter:{duetone:!1}}}:e)),(0,Ke.unregisterFormatType)("core/image"),(0,Ke.unregisterFormatType)("core/code"),(0,Ke.unregisterFormatType)("core/language"),(0,p.addFilter)("blocks.registerBlockType","mailpoet-email-editor/disable-columns-layout",((e,t)=>"core/columns"===t||"core/column"===t?{...e,supports:{...e.supports,layout:!1}}:e)),(0,p.addFilter)("blocks.registerBlockType","mailpoet-email-editor/change-button",((e,t)=>"core/button"===t?{...e,styles:[]}:e)),(0,p.addFilter)("blocks.registerBlockType","mailpoet-email-editor/change-buttons",((e,t)=>"core/buttons"===t?{...e,supports:{...e.supports,layout:!1,__experimentalEmailFlexLayout:!0}}:e)),(0,d.registerCoreBlocks)(),(0,p.addFilter)("editor.MediaUpload","mailpoet/email-editor/replace-media-upload",(()=>pt.MediaUpload)),(0,o.createRoot)(t).render((0,Ze.jsx)(pi,{})))}window.addEventListener("DOMContentLoaded",(()=>{mi("mailpoet-email-editor")}))}()}();